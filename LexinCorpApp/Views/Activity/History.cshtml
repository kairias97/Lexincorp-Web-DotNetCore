@model ActivityHistoryViewModel
@{
    ViewData["Title"] = "Historial de actividades";
}
<h2>Historial de actividades</h2>
<form asp-controller="Activity" asp-action="History" method="get">
    <label for="filter">Filtro de búsqueda:</label>
    <div class="input-group mb-3">
        <input type="text" class="form-control" name="filter" value="@Model.CurrentFilter" placeholder="Nombre del cliente" aria-label="Nombre del cliente" aria-describedby="button-addon2">
        <div class="input-group-append">
            <button class="btn btn-outline-info" type="submit" id="button-addon2">Buscar</button>
        </div>
    </div>
    <br />
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Cliente</th>
                    <th>Servicio</th>
                    <th>Horas</th>
                    <th>Tipo de actividad</th>
                    <th>Paquete</th>
                    <th>Retainer</th>
                    <th>Ítem</th>
                    <th>Fecha</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var activity in Model.Activities)
                {
                    <tr>
                        <td>@activity.Client.Name</td>
                        <td>@activity.Service.Name</td>
                        <td>@Math.Round(activity.HoursWorked, 2)</td>
                        @if (activity.ActivityType == ActivityTypeEnum.Package)
                        {
                            <td>Paquete</td>
                        }
                        else if (activity.ActivityType == ActivityTypeEnum.Retainer)
                        {
                            <td>Retainer</td>
                        }
                        else if (activity.ActivityType == ActivityTypeEnum.Item)
                        {
                            <td>Ítem</td>
                        }
                        else if (activity.ActivityType == ActivityTypeEnum.Hourly)
                        {
                            <td>Hora</td>
                        }
                        else if(activity.ActivityType == ActivityTypeEnum.NoBillable)
                        {
                            <td>No cobrable</td>
                        }
                        <td>@(activity.Package?.Name ?? "-")</td>
                        <td>@(activity.BillableRetainer?.Name ?? "-")</td>
                        <td>@(activity.Item?.Name ?? "-")</td>
                        <td>@activity.RealizationDate.ToString("dd/MM/yyyy")</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <div page-model="@Model.PagingInfo" page-action="Admin" page-classes-enabled="true"
         page-class="btn" page-class-normal="btn-outline-info"
         page-class-selected="btn-info" page-url-filter="@Model.CurrentFilter"
         page-number-url-key="pageNumber"
         class="btn-group float-right m-1">

    </div>
</form>
