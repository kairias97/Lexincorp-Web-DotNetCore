@model NewAttorneyViewModel
@{
    ViewData["Title"] = "Agregar usuario";
}
<script type="text/javascript">
    $(function () {
        $("#admissionDate").datepicker();
        $("#admissionDate").datepicker("option", "dateFormat", "dd/mm/yy");
        var date = new Date();
        var lastDay = new Date(date.getFullYear(), date.getMonth(), date.getDate());
        $("#admissionDate").datepicker("option", {
            maxDate: lastDay
        });
        $("#admissionDate").datepicker("setDate", date);
    });
</script>
<h4>Agregar nuevo usuario abogado</h4>
<br />
@if (ViewBag.AddedAttorney ?? false)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        <p>Usuario registrado exitosamente!</p>

        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
}
<form asp-action="New" asp-controller="Attorney" method="post">
    @if (ViewData.ModelState.Any(x => x.Value.Errors.Any()))
    {
        <div class="alert alert-danger alert-dismissible fade show">
            @Html.ValidationSummary(false, "Errores de validación:")
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    }
    <div class="form-row">
        <div class="form-group col-md-5">
            <label for="@Model.Attorney.Name">Nombre del abogado:*</label>
            <input type="text" asp-for="@Model.Attorney.Name" class="form-control" required />
        </div>
        <div class="form-group col-md-5">
            <label for="@Model.Attorney.User.Username">Nombre de usuario:*</label>
            <input type="text" asp-for="@Model.Attorney.User.Username" class="form-control" required />
        </div>
        <div class="form-group col-md-5">
            <label for="@Model.Attorney.User.IsAdmin">Tipo de usuario:*</label>
            <select class="form-control" asp-for="@Model.Attorney.User.IsAdmin">
                <option value="true">Administrador</option>
                <option value="false">Regular</option>
            </select>
        </div>
        <div class="form-group col-md-5">
            <label for="@Model.Attorney.AdmissionDate">Fecha de admisión (dd/MM/yyyy):*</label>
            <input type="text" asp-for="@Model.Attorney.AdmissionDate" id="admissionDate" value="@(Model.Attorney.AdmissionDate == DateTime.MinValue ? DateTime.Now.ToString("dd/MM/yyyy") : Model.Attorney.AdmissionDate.ToString("dd/MM/yyyy"))" class="form-control" required />
        </div>
        <div class="form-group col-md-5">
            <label for="@Model.Attorney.Address">Dirección:*</label>
            <input type="text" asp-for="@Model.Attorney.Address" class="form-control" required />
        </div>
        <div class="form-group col-md-5">
            <label for="@Model.Attorney.IdentificationNumber">Número de identificación (cédula):*</label>
            <input type="text" asp-for="@Model.Attorney.IdentificationNumber" class="form-control" required />
        </div>
        <div class="form-group col-md-5">
            <label for="@Model.Attorney.AssignedPhoneNumber">Número de teléfono asignado:*</label>
            <input type="tel" asp-for="@Model.Attorney.AssignedPhoneNumber" class="form-control" required />
        </div>
        <div class="form-group col-md-5">
            <label for="@Model.Attorney.PersonalPhoneNumber">Número de teléfono personal:*</label>
            <input type="tel" asp-for="@Model.Attorney.PersonalPhoneNumber" class="form-control" required />
        </div>
        <div class="form-group col-md-5">
            <label for="@Model.Attorney.EmergencyContact">Contacto de emergencia:*</label>
            <input type="text" asp-for="@Model.Attorney.EmergencyContact" class="form-control" required />
        </div>
        <div class="form-group col-md-5">
            <label for="@Model.Attorney.EmergencyContactPhoneNumber">Número de teléfono del contacto de emergencia:*</label>
            <input type="tel" asp-for="@Model.Attorney.EmergencyContactPhoneNumber" class="form-control" required />
        </div>
        <div class="form-group col-md-5">
            <label for="@Model.Attorney.NotaryCode">Código de notario:*</label>
            <input type="number" asp-for="@Model.Attorney.NotaryCode" class="form-control" required />
        </div>
        <div class="form-group col-md-5">
            <label for="@Model.Attorney.DepartmentId">Departamento:*</label>
            <select class="form-control" asp-for="@Model.Attorney.DepartmentId">
                @foreach (var d in Model.Departments)
                {
                    @if (@Model.Attorney.DepartmentId == d.DepartmentId)
                    {
                        @:<option value="@d.DepartmentId" selected>@d.Name</option>
                    }
                    else
                    {
                        @:<option value="@d.DepartmentId">@d.Name</option>
                    }

                }
            </select>
        </div>
        <div class="form-group col-md-5">
            <label for="@Model.Attorney.Email">Email:*</label>
            <input type="email" asp-for="@Model.Attorney.Email" class="form-control" required />
        </div>
    </div>
    <button type="submit" class="btn btn-primary">Agregar</button>
</form>
